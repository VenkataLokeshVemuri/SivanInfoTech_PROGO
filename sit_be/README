$ sudo apt-get update
$ sudo apt-get install python3-pip
$ sudo pip3 install virtualenv
$ git clone https://github.com/SivanInfoTech/websitephase1.git
$ cd websitephase1
$ virtualenv venv
$ source venv/bin/activate
$ pip install -r requirements.txt
$ python app.py
$ pip3 install gunicorn
$ vi wsgi.py 
    #Add the following lines:
        from app import app
        
        if __name__ == "__main__":
            app.run(debug=True)
$ gunicorn --bind 0.0.0.0:5000 wsgi:app
$ vi /etc/systemd/system/sitcloud.service
  #Add the following lines:
      [Unit]
      Description=Gunicorn instance to serve sitcloud
      After=network.target
      
      [Service]
      User=root
      Group=www-data
      WorkingDirectory=/root/websitephase1/sit_be
      Environment="PATH=/root/websitephase1/sit_be/venv/bin"
      ExecStart=/root/websitephase1/sit_be/venv/bin/gunicorn --workers 3 --bind unix:sitcloud.sock -m 007 wsgi:app
      
      [Install]
      WantedBy=multi-user.target

$ systemctl start sitcloud
$ systemctl status sitcloud
$ systemctl enable sitcloud
$ systemctl daemon-reload
$ sudo chmod 755 /root/websitephase1
$ vi /etc/nginx/sites-available/sitcloud
        server {
            server_name service.sitcloud.in www.service.sitcloud.in;
            location / {
                include proxy_params;
                proxy_pass  http://unix:/root/websitephase1/sit_be/sitcloud.sock;
            }
            listen 443 ssl; # managed by Certbot
            ssl_certificate /etc/letsencrypt/live/service.sitcloud.in/fullchain.pem; # managed by Certbot
            ssl_certificate_key /etc/letsencrypt/live/service.sitcloud.in/privkey.pem; # managed by Certbot
            include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
            ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
        }
        server {
            if ($host = service.sitcloud.in) {
                return 301 https://$host$request_uri;
            } # managed by Certbot
            listen 8080;
            server_name service.sitcloud.in www.service.sitcloud.in;
            return 404; # managed by Certbot
        }
$ sudo nginx -t
$ sudo ln -s /etc/nginx/sites-available/sitcloud /etc/nginx/sites-enabled
$ sudo systemctl restart nginx
$ sudo ufw enable
$ sudo ufw delete allow 5000
$  sudo ufw allow 'Nginx Full'
$ sudo ufw  allow 22
$ sudo ufw status
    root@ip-172-31-32-248:~/websitephase1/sit_be# ufw status
    Status: active
    
    To                         Action      From
    --                         ------      ----
    Nginx HTTPS                ALLOW       Anywhere
    Nginx Full                 ALLOW       Anywhere
    Nginx HTTP                 ALLOW       Anywhere
    22                         ALLOW       Anywhere
    80                         ALLOW       Anywhere
    27017                      ALLOW       Anywhere
    Nginx HTTPS (v6)           ALLOW       Anywhere (v6)
    Nginx Full (v6)            ALLOW       Anywhere (v6)
    Nginx HTTP (v6)            ALLOW       Anywhere (v6)
    22 (v6)                    ALLOW       Anywhere (v6)
    80 (v6)                    ALLOW       Anywhere (v6)
    27017 (v6)                 ALLOW       Anywhere (v6)

$  systemctl status sitcloud
